<!DOCTYPE html>
<html>
<head>
<title>Draft to WordPress</title>
<base target="_top">
<link rel="stylesheet" href="https://ssl.gstatic.com/docs/script/css/add-ons1.css">
<style type="text/css">
/**
 * Reset
 */
html, body {
	margin: 0;
	padding: 0;
}

* {
	box-sizing: border-box;
	-moz-box-sizing: border-box;
	-webkit-box-sizing: border-box;
}

textarea,
input,
body {
	font: 14px/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen-Sans", "Ubuntu", "Cantarell", "Helvetica Neue", sans-serif;
}

body {
	background: #e8eff3;
	color: #2E4453;
}


/**
 * General
 */

.header {
	background: #0087be;
}

.header h1 {
	font-size: 100%;
	margin: 0;
	padding: 8px 16px;
	color: #fff;
	font-weight: 600;
}

.help-text {
	background: #fff;
	padding: 4px 16px;
	border-bottom: 1px solid #c8d7e0;
}

.sites-list ul {
	list-style: none;
	margin: 0;
	padding: 0;
}

.sites-list ul li {
	border-bottom: 1px solid #c8d7e0;
	padding: 8px 16px;
}

.sites-list ul li button {
	float: right;
}

.sites-list ul li .sites-list__avatar {
	width: 34px;
	height: 34px;
	float: left;
	margin-right: 8px;
}

.sites-list ul li .sites-list__sitename a {
	color: #2E4453;
	display: block;
}

.sites-list ul li .sites-list__sitename em {
	font-size: 11px;
	font-style: normal;
	color: #668EAA;
	display: block;
}


/**
 * Calypso UI widgets
 */

textarea,
input {
    transition: all .15s ease-in-out;
	border: 1px solid #c8d7e1;
    outline: none;
}

textarea:focus,
input:focus {
	border-color: #0087be;
	box-shadow: 0 0 0 2px #78dcfa;
}

button {
	cursor: pointer;
	font-size: 12px;
	background: #13aadc;
	color: #fff;
	border-radius: 4px;
	border: 1px solid #0987be;
	border-bottom-width: 2px;
}

button:hover,
button:active {
	background: #13aadc;
	color: #fff;
	border-color: #015082;
}

button:active {
	border-bottom-width: 1px;
	border-top-width: 2px;
}

button:focus {
	box-shadow: none;
}
</style>
</head>

<body>

<div class="container">

	<div class="header">
		<h1>Draft to WordPress</h1>
	</div>

	<div class="help-text">
		<p>Pick a site to copy this document to below. It will be saved on your site as a draft.</p>
	</div>

	<div class="sites-list">
		<ul>
			<li>
				<button id="bar">Save Draft</button>
				<div class="sites-list__blavatar">

				</div>
				<div class="sites-list__sitename">
					<a href="<?= URL ?>"><?= name ?></a>
					<em>siteurl</em>
					<textarea id="foo"></textarea><br />
				</div>
			</li>
		</ul>
	</div>

</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
/**
 * On document load, assign click handlers to each button and try to load the
 * user's origin and destination language preferences if previously set.
 */
$( function() {
	$( '#bar' ).click( postToWordPress );
} );

function postToWordPress() {
	var self = this;
	self.disabled = true;
	google.script.run
		.withSuccessHandler( function( html, element ) {
			$( '#foo' ).val( html );
			self.disabled = false;
		})
		.withFailureHandler( function( msg, element ) {
			showError( msg, $( '#bar' ) );
			self.disabled = false;
		})
		.withUserObject( this )
		.postToWordPress();
}

/**
 * Inserts a div that contains an error message after a given element.
 *
 * @param msg The error message to display.
 * @param element The element after which to display the error.
 */
function showError( msg, element ) {
	var div = $( '<div id="error" class="error">' + msg + '</div>' );
	$( element ).after( div );
}
</script>

</body>
</html>
