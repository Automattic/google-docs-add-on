<!DOCTYPE html>
<html>

<head>
	<base target="_top">
	<link rel="stylesheet" href="https://ssl.gstatic.com/docs/script/css/add-ons1.css">
</head>

<body>
	<h1>Hello world</h1>
	<textarea id="foo"></textarea>
	<button id="bar">Fnord</button>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script>
/**
 * On document load, assign click handlers to each button and try to load the
 * user's origin and destination language preferences if previously set.
 */
$(function() {
	$('#bar').click(getDocumentAsHTML);
});

function getDocumentAsHTML() {
	var self = this;
	self.disabled = true;
	google.script.run
		.withSuccessHandler(function(html, element) {
			$('#foo').val(html);
			self.disabled = false;
		})
		.withFailureHandler(function(msg, element) {
			showError(msg, $('#bar'));
			self.disabled = false;
		})
		.withUserObject(this)
		.postToWordPress();
}

/**
 * Inserts a div that contains an error message after a given element.
 *
 * @param msg The error message to display.
 * @param element The element after which to display the error.
 */
function showError(msg, element) {
	var div = $('<div id="error" class="error">' + msg + '</div>');
	$(element).after(div);
}
	</script>
</body>

</html>